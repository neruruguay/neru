(function($) {
    $.cleditor.buttons.table = {name: "table", css: {backgroundPosition: "right top", width: "24px"}, title: "Insertar Tabla", command: "inserthtml", popupName: "table", popupClass: "cleditorPrompt", popupContent: '<table cellpadding=0 cellspacing=0><tr><td style="padding-right:6px;">Columnas:<br /><input type=text value=2 size=12 /></td><td style="padding-right:6px;">Filas:<br /><input type=text value=4 size=12 /></td></tr><tr><td style="padding-right:6px;">Margen de celda:<br /><input type=text value=0 size=12 /></td><td style="padding-right:6px;">Espacio de celda:<br /><input type=text value=0 size=12 /></td></tr><tr><td style="padding-right:6px;">Borde:<br /><input type=text value=0 size=12 /></td><td style="padding-right:6px;">Clase:<br /><input type=text value="Alquileres" size=12 /></td></tr></table><br /><input type=button value=Agregar  />', buttonClick: function(l, d) {
            $(d.popup).children(":button").unbind("click").bind("click", function() {
                var j = d.editor, a = $(d.popup).find(":text"), e = parseInt(a[0].value), f = parseInt(a[1].value), g = parseInt(a[2].value), h = parseInt(a[3].value), i = parseInt(a[4].value), k = a[5].value;
                if (parseInt(e) < 1 || !parseInt(e)) {
                    e = 0
                }
                if (parseInt(f) < 1 || !parseInt(f)) {
                    f = 0
                }
                if (parseInt(g) < 1 || !parseInt(g)) {
                    g = 0
                }
                if (parseInt(h) < 1 || !parseInt(h)) {
                    h = 0
                }
                if (parseInt(i) < 1 || !parseInt(i)) {
                    i = 0
                }
                var b;
                if (e > 0 && f > 0) {
                    b = "<table border=" + i + " cellpadding=" + h + " cellspacing=" + g + (k ? ' class="' + k + '"' : "") + ">";
                    for (y = 0; y < f; y++) {
                        b += "<tr>";
                        for (x = 0; x < e; x++) {
                            b += "<td>Texto aquï¿½</td>"
                        }
                        b += "</tr>"
                    }
                    b += "</table><br />"
                }
                b && j.execCommand(d.command, b, null, d.button);
                a[0].value = "4";
                a[1].value = "4";
                a[2].value = "2";
                a[3].value = "2";
                a[4].value = "1";
                a[5].value = "";
                j.hidePopups();
                j.focus()
            })
        }};
    $.cleditor.defaultOptions.controls = $.cleditor.defaultOptions.controls.replace("rule", "rule table")
})(jQuery);